# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- main

strategy:
  matrix:
    'test':
      image: 'ubuntu-18.04'
      cmd: "mvn -e clean integration-test failsafe:verify -DargLine='-Xms1024m -Xmx2048m'"
    'false':
      image: 'ubuntu-18.04'
      cmd: "false"

pool:
  vmImage: $(image)

steps:
- bash: eval "$(cmd)"

