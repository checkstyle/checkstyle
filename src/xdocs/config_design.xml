<?xml version="1.0" encoding="UTF-8"?>

<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">

  <head>
    <title>Class Design</title>
  </head>

  <body>
    <section name="Content">
      <macro name="toc">
        <param name="fromDepth" value="1"/>
        <param name="toDepth" value="1"/>
      </macro>
    </section>

    <section name="DesignForExtension">
      <p>Since Checkstyle 3.1</p>
      <subsection name="Description" id="DesignForExtension_Description">
        <p>
          Checks that classes are designed for extension (subclass creation).
        </p>
        <p>
          Nothing wrong could be with founded classes.
          This check makes sense only for library projects (not application projects)
          which care of ideal OOP-design to make sure that class works in all cases even misusage.
          Even in library projects this check most likely will find classes that are designed
          for extension by somebody. User needs to use suppressions extensively to got a benefit
          from this check, and keep in suppressions all confirmed/known classes that are deigned
          for inheritance intentionally to let the check catch only new classes, and bring this to
          team/user attention.
        </p>
        <p>
         ATTENTION: Only user can decide whether a class is designed for extension or not.
         The check just shows all classes which are possibly designed for extension.
         If smth inappropriate is found please use suppression.
        </p>
        <p>
         ATTENTION: If the method which can be overridden in a subclass has a javadoc comment
         (a good practice is to explain its self-use of overridable methods) the check will not
         rise a violation. The violation can also be skipped if the method which can be overridden
         in a subclass has one or more annotations that are specified in ignoredAnnotations
         option. Note, that by default @Override annotation is not included in the
         ignoredAnnotations set as in a subclass the method which has the annotation can also be
         overridden in its subclass.
        </p>
        <p>
          Problem is described at "Effective Java, 2nd Edition by Joshua Bloch" book, chapter
          "Item 17: Design and document for inheritance or else prohibit it".
        </p>
        <p>
          Some quotes from book:
        </p>
        <blockquote>The class must document its self-use of overridable methods.
By convention, a method that invokes overridable methods contains a description
of these invocations at the end of its documentation comment. The description
begins with the phrase “This implementation.”
        </blockquote>
        <blockquote>The best solution to this problem is to prohibit subclassing in classes that
are not designed and documented to be safely subclassed.
        </blockquote>
        <blockquote>If a concrete class does not implement a standard interface, then you may
inconvenience some programmers by prohibiting inheritance. If you feel that you
must allow inheritance from such a class, one reasonable approach is to ensure
that the class never invokes any of its overridable methods and to document this
fact. In other words, eliminate the class’s self-use of overridable methods entirely.
In doing so, you’ll create a class that is reasonably safe to subclass. Overriding a
method will never affect the behavior of any other method.
        </blockquote>
        <p>
          The check finds classes that have overridable methods (public or protected methods
          that are non-static, not-final, non-abstract) and have non-empty implementation.
        </p>

        <p>
          Rationale: This library design style protects superclasses against
          being broken by subclasses. The downside is that subclasses are
          limited in their flexibility, in particular they cannot prevent
          execution of code in the superclass, but that also means that
          subclasses cannot corrupt the state of the superclass by forgetting
          to call the superclass's method.
        </p>
        <p>
          More specifically,
          it enforces a programming style where superclasses provide empty
          "hooks" that can be implemented by subclasses.
        </p>
        <p>
          Example of code that cause violation as it is designed for extension:
        </p>
        <source>
public abstract class Plant {
  private String roots;
  private String trunk;

  protected void validate() {
    if (roots == null) throw new IllegalArgumentException("No roots!");
    if (trunk == null) throw new IllegalArgumentException("No trunk!");
  }

  public abstract void grow();
}

public class Tree extends Plant {
  private List leaves;

  @Overrides
  protected void validate() {
    super.validate();
    if (leaves == null) throw new IllegalArgumentException("No leaves!");
  }

  public void grow() {
    validate();
  }
}
        </source>
        <p>
          Example of code without violation:
        </p>
        <source>
public abstract class Plant {
  private String roots;
  private String trunk;

  private void validate() {
    if (roots == null) throw new IllegalArgumentException("No roots!");
    if (trunk == null) throw new IllegalArgumentException("No trunk!");
    validateEx();
  }

  protected void validateEx() { }

  public abstract void grow();
}
        </source>
      </subsection>

      <subsection name="Properties" id="DesignForExtension_Properties">
        <div class="wrapper">
          <table>
            <tr>
              <th>name</th>
              <th>description</th>
              <th>type</th>
              <th>default value</th>
              <th>since</th>
            </tr>
            <tr>
              <td>ignoredAnnotations</td>
              <td>
                Specify annotations which allow the check to skip the method from validation.
              </td>
              <td><a href="property_types.html#String.5B.5D">String[]</a></td>
              <td><code>After, AfterClass, Before, BeforeClass, Test</code></td>
              <td>7.2</td>
            </tr>
          </table>
        </div>
      </subsection>

      <subsection name="Examples" id="DesignForExtension_Examples">
        <p>
          To configure the check:
        </p>

        <source>
&lt;module name=&quot;DesignForExtension&quot;/&gt;
        </source>

        <p>
          To configure the check to allow methods which have @Override and @Test annotations to be
          designed for extension.
        </p>

        <source>
&lt;module name=&quot;DesignForExtension&quot;&gt;
  &lt;property name=&quot;ignoredAnnotations&quot; value=&quot;Override, Test&quot;/&gt;
&lt;/module&gt;
        </source>

        <source>
public class A extends B {
  @Override
  public int foo() {
    return 2;
  }

  public int foo2() {return 8;} // violation
}

public class B {
  /**
   * This implementation ...
     @return some int value.
   */
  public int foo() {
    return 1;
  }

  public int foo3() {return 3;} // violation
}

public class FooTest {
  @Test
  public void testFoo() {
    final B b = new A();
    assertEquals(2, b.foo());
  }

  public int foo4() {return 4;} // violation
}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="DesignForExtension_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources+filename%3Asun_checks.xml+repo%3Acheckstyle%2Fcheckstyle+DesignForExtension">
            Sun Style</a>
          </li>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+DesignForExtension">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="DesignForExtension_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22design.forExtension%22">
            design.forExtension</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="DesignForExtension_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="DesignForExtension_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="FinalClass">
      <p>Since Checkstyle 3.1</p>
      <subsection name="Description" id="FinalClass_Description">
        <p>
          Checks that a class which has only private constructors is declared
          as final. Doesn't check for classes nested in interfaces
          or annotations, as they are always <code>final</code> there.
        </p>
      </subsection>

      <subsection name="Examples" id="FinalClass_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name=&quot;FinalClass&quot;/&gt;
        </source>
        <p>
            Example:
        </p>
        <source>
final class MyClass { // OK
  private MyClass() { }
}

class MyClass { // violation, class should be declared final
  private MyClass() { }
}

class MyClass { // OK, since it has a public constructor
  int field1;
  String field2;
  private MyClass(int value) {
    this.field1 = value;
    this.field2 = " ";
  }
  public MyClass(String value) {
    this.field2 = value;
    this.field1 = 0;
  }
}

interface CheckInterface
{
  class MyClass { // OK, nested class in interface is always final
    private MyClass() {}
  }
}

public @interface Test {
  public boolean enabled()
  default true;
  class MyClass { // OK, class nested in an annotation is always final
    private MyClass() { }
  }
}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="FinalClass_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources+filename%3Asun_checks.xml+repo%3Acheckstyle%2Fcheckstyle+FinalClass">
            Sun Style</a>
          </li>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+FinalClass">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="FinalClass_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22final.class%22">
            final.class</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="FinalClass_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="FinalClass_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="HideUtilityClassConstructor">
      <p>Since Checkstyle 3.1</p>
      <subsection name="Description" id="HideUtilityClassConstructor_Description">
        <p>
          Makes sure that utility classes (classes that contain only static
          methods or fields in their API) do not have a public constructor.
        </p>

        <p>
          Rationale: Instantiating utility classes does not make sense. Hence
          the constructors should either be private or (if you want to allow
          subclassing) protected. A common mistake is forgetting to hide the
          default constructor.
        </p>

        <p>
          If you make the constructor protected you may want to consider the
          following constructor implementation technique to disallow
          instantiating subclasses:
        </p>

        <source>
public class StringUtils // not final to allow subclassing
{
  protected StringUtils() {
    // prevents calls from subclass
    throw new UnsupportedOperationException();
  }

  public static int count(char c, String s) {
    // ...
  }
}
        </source>
      </subsection>

      <subsection name="Examples" id="HideUtilityClassConstructor_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name=&quot;HideUtilityClassConstructor&quot;/&gt;
        </source>
        <p>
          Example:
        </p>
        <source>
class Test { // violation, class only has a static method and a constructor

  public Test() {
  }

  public static void fun() {
  }
}

class Foo { // OK

  private Foo() {
  }

  static int n;
}

class Bar { // OK

  protected Bar() {
    // prevents calls from subclass
    throw new UnsupportedOperationException();
  }
}

class UtilityClass { // violation, class only has a static field

  static float f;
}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="HideUtilityClassConstructor_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources+filename%3Asun_checks.xml+repo%3Acheckstyle%2Fcheckstyle+HideUtilityClassConstructor">
            Sun Style</a>
          </li>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+HideUtilityClassConstructor">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="HideUtilityClassConstructor_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22hide.utility.class%22">
            hide.utility.class</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="HideUtilityClassConstructor_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="HideUtilityClassConstructor_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="InnerTypeLast">
      <p>Since Checkstyle 5.2</p>
      <subsection name="Description" id="InnerTypeLast_Description">
        <p>
          Checks nested (internal) classes/interfaces are declared at the bottom of the
          primary (top-level) class after all init and static init blocks,
          method, constructor and field declarations.
        </p>
      </subsection>

      <subsection name="Examples" id="InnerTypeLast_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name=&quot;InnerTypeLast&quot;/&gt;
        </source>
        <p>Example:</p>
        <source>
class Test {
    private String s; // OK
    class InnerTest1 {}
    public void test() {} // violation, method should be declared before inner types.
}

class Test2 {
    static {}; // OK
    class InnerTest1 {}
    public Test2() {} // violation, constructor should be declared before inner types.
}

class Test3 {
    private String s; // OK
    public void test() {} // OK
    class InnerTest1 {}
}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="InnerTypeLast_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+InnerTypeLast">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="InnerTypeLast_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22arrangement.members.before.inner%22">
            arrangement.members.before.inner</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="InnerTypeLast_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="InnerTypeLast_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="InterfaceIsType">
      <p>Since Checkstyle 3.1</p>
      <subsection name="Description" id="InterfaceIsType_Description">
        <p>
          Implements Joshua Bloch, Effective Java, Item 17 - Use Interfaces only to
          define types.
        </p>

        <p>
          According to Bloch, an interface should describe a <em>type</em>.
          It is therefore inappropriate to define an interface that does not
          contain any methods but only constants. The Standard interface <a
          href="https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingConstants.html">
            javax.swing.SwingConstants</a>
          is an example of an interface that would be flagged by this check.
        </p>

        <p>
          The check can be configured to also disallow marker interfaces like
          <code>java.io.Serializable</code>, that do not contain methods or
          constants at all.
        </p>
      </subsection>

      <subsection name="Properties" id="InterfaceIsType_Properties">
        <div class="wrapper">
          <table>
            <tr>
              <th>name</th>
              <th>description</th>
              <th>type</th>
              <th>default value</th>
              <th>since</th>
            </tr>
            <tr>
              <td>allowMarkerInterfaces</td>
              <td>
                Control whether marker interfaces like Serializable are
                allowed.
              </td>
              <td><a href="property_types.html#boolean">boolean</a></td>
              <td><code>true</code></td>
              <td>3.1</td>
            </tr>
          </table>
        </div>
      </subsection>

      <subsection name="Examples" id="InterfaceIsType_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name=&quot;InterfaceIsType&quot;/&gt;
        </source>
        <p>Example:</p>
        <source>
public interface Test1 { // violation
    int a = 3;
}

public interface Test2 { // OK

}

public interface Test3 { // OK
    int a = 3;
    void test();
}
        </source>
        <p>
          To configure the check to report violation so that it doesn't allow Marker Interfaces:
        </p>
        <source>
&lt;module name=&quot;InterfaceIsType&quot;&gt;
  &lt;property name=&quot;allowMarkerInterfaces&quot; value=&quot;false&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>Example:</p>
        <source>
public interface Test1 { // violation
    int a = 3;
}

public interface Test2 { // violation

}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="InterfaceIsType_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources+filename%3Asun_checks.xml+repo%3Acheckstyle%2Fcheckstyle+InterfaceIsType">
            Sun Style</a>
          </li>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+InterfaceIsType">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="InterfaceIsType_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22interface.type%22">
            interface.type</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="InterfaceIsType_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="InterfaceIsType_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="MutableException">
      <p>Since Checkstyle 3.2</p>
      <subsection name="Description" id="MutableException_Description">
        <p>
          Ensures that exception classes (classes with names conforming to some regular
          expression and explicitly extending classes with names conforming to other
          regular expression) are immutable, that is, that they have only final fields.
        </p>

        <p>
          The current algorithm is very simple: it checks that all members of
          exception are final. The user can still mutate an exception's instance
          (e.g. Throwable has a method called <code>setStackTrace</code>
          which changes the exception's stack trace). But, at least, all information
          provided by this exception type is unchangeable.
        </p>

        <p>
          Rationale: Exception instances should represent an error
          condition. Having non final fields not only allows the state to be
          modified by accident and therefore mask the original condition but
          also allows developers to accidentally forget to set the initial state.
          In both cases, code catching the exception could draw incorrect
          conclusions based on the state.
        </p>
      </subsection>

      <subsection name="Properties" id="MutableException_Properties">
        <div class="wrapper">
          <table>
            <tr>
              <th>name</th>
              <th>description</th>
              <th>type</th>
              <th>default value</th>
              <th>since</th>
            </tr>
            <tr>
              <td>format</td>
              <td>Specify pattern for exception class names.</td>
              <td><a href="property_types.html#Pattern">Pattern</a></td>
              <td><code>"^.*Exception$|^.*Error$|^.*Throwable$"</code></td>
              <td>3.2</td>
            </tr>
            <tr>
              <td>extendedClassNameFormat</td>
              <td>Specify pattern for extended class names.</td>
              <td><a href="property_types.html#Pattern">Pattern</a></td>
              <td><code>"^.*Exception$|^.*Error$|^.*Throwable$"</code></td>
              <td>6.2</td>
            </tr>
          </table>
        </div>
      </subsection>

      <subsection name="Examples" id="MutableException_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name=&quot;MutableException&quot;/&gt;
        </source>
      </subsection>

      <subsection name="Example of Usage" id="MutableException_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+MutableException">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="MutableException_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22mutable.exception%22">
            mutable.exception</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="MutableException_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="MutableException_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="OneTopLevelClass">
      <p>Since Checkstyle 5.8</p>
      <subsection name="Description" id="OneTopLevelClass_Description">
        <p>
          Checks that each top-level class, interface, enum
          or annotation resides in a source file of its own.
          Official description of a 'top-level' term:<a
          href="https://docs.oracle.com/javase/specs/jls/se11/html/jls-7.html#jls-7.6">
            7.6. Top Level Type Declarations</a>.
          If file doesn't contains public class, interface, enum or annotation,
          top-level type is the first type in file.
        </p>
      </subsection>

      <subsection name="Examples" id="OneTopLevelClass_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name="OneTopLevelClass"/&gt;
        </source>
        <p>
          <b>ATTENTION:</b> This Check does not support customization of validated tokens, so do
          not use the "tokens" property.
        </p>
        <p>
          An example of code with violations:
        </p>
        <div class="wrapper">
          <pre>
public class Foo { // OK, first top-level class
  // methods
}

class Foo2 { // violation, second top-level class
  // methods
}

record Foo3 { // violation, third top-level "class"
  // methods
}
          </pre>
        </div>
        <p>
          An example of code without public top-level type:
        </p>
        <div class="wrapper">
          <pre>
class Foo { // OK, first top-level class
  // methods
}

class Foo2 { // violation, second top-level class
  // methods
}
          </pre>
        </div>
        <p>
          An example of code without violations:
        </p>
        <div class="wrapper">
          <pre>
public class Foo { // OK, only one top-level class
  // methods
}
          </pre>
        </div>
      </subsection>

      <subsection name="Example of Usage" id="OneTopLevelClass_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources+filename%3Agoogle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+OneTopLevelClass">
            Google Style</a>
          </li>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+OneTopLevelClass">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="OneTopLevelClass_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22one.top.level.class%22">
            one.top.level.class</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="OneTopLevelClass_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="OneTopLevelClass_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="ThrowsCount">
      <p>Since Checkstyle 3.2</p>
      <subsection name="Description" id="ThrowsCount_Description">
        <p>
          Restricts throws statements to a specified count.
          Methods with "Override" or "java.lang.Override" annotation are skipped
          from validation as current class cannot change signature of these methods.
        </p>

        <p>
          Rationale: Exceptions form part of a method's interface. Declaring a
          method to throw too many differently rooted exceptions makes
          exception handling onerous and leads to poor programming practices
          such as writing code like <code>catch(Exception ex)</code>.
          4 is the empirical value which is based on reports that we had for
          the ThrowsCountCheck over big projects such as OpenJDK.
          This check also forces developers to put exceptions into a hierarchy
          such that in the simplest case, only one type of exception need be
          checked for by a caller but any subclasses can be caught specifically
          if necessary. For more information on rules for the exceptions and
          their issues, see Effective Java: Programming Language Guide
          Second Edition by Joshua Bloch pages 264-273.
        </p>

        <p>
          <b>ignorePrivateMethods</b> - allows to skip private methods as they do
          not cause problems for other classes.
        </p>
      </subsection>

      <subsection name="Properties" id="ThrowsCount_Properties">
        <div class="wrapper">
          <table>
            <tr>
              <th>name</th>
              <th>description</th>
              <th>type</th>
              <th>default value</th>
              <th>since</th>
            </tr>
            <tr>
              <td>max</td>
              <td>Specify maximum allowed number of throws statements.</td>
              <td><a href="property_types.html#int">int</a></td>
              <td><code>4</code></td>
              <td>3.2</td>
            </tr>
            <tr>
              <td>ignorePrivateMethods</td>
              <td>Allow private methods to be ignored.</td>
              <td><a href="property_types.html#boolean">boolean</a></td>
              <td><code>true</code></td>
              <td>6.7</td>
            </tr>
          </table>
        </div>
      </subsection>

      <subsection name="Examples" id="ThrowsCount_Examples">
        <p>
          To configure check:
        </p>
        <source>
&lt;module name="ThrowsCount"/&gt;
        </source>
        <p>
          Example:
        </p>
        <source>
class Test {
    public void myFunction() throws CloneNotSupportedException,
                                ArrayIndexOutOfBoundsException,
                                StringIndexOutOfBoundsException,
                                IllegalStateException,
                                NullPointerException { // violation, max allowed is 4
        // body
    }

    public void myFunc() throws ArithmeticException,
                                NumberFormatException { // ok
        // body
    }

    private void privateFunc() throws CloneNotSupportedException,
                                ClassNotFoundException,
                                IllegalAccessException,
                                ArithmeticException,
                                ClassCastException { // ok, private methods are ignored
        // body
    }

}
        </source>
        <p>
          To configure the check so that it doesn't allow more than two throws
          per method:
        </p>
        <source>
&lt;module name=&quot;ThrowsCount&quot;&gt;
  &lt;property name=&quot;max&quot; value=&quot;2&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example:
        </p>
        <source>
class Test {
    public void myFunction() throws IllegalStateException,
                                ArrayIndexOutOfBoundsException,
                                NullPointerException { // violation, max allowed is 2
        // body
    }

    public void myFunc() throws ArithmeticException,
                                NumberFormatException { // ok
        // body
    }

    private void privateFunc() throws CloneNotSupportedException,
                                ClassNotFoundException,
                                IllegalAccessException,
                                ArithmeticException,
                                ClassCastException { // ok, private methods are ignored
        // body
    }

}
        </source>
        <p>
          To configure the check so that it doesn't skip private methods:
        </p>
        <source>
&lt;module name=&quot;ThrowsCount&quot;&gt;
  &lt;property name=&quot;ignorePrivateMethods&quot; value=&quot;false&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example:
        </p>
        <source>
class Test {
    public void myFunction() throws CloneNotSupportedException,
                                ArrayIndexOutOfBoundsException,
                                StringIndexOutOfBoundsException,
                                IllegalStateException,
                                NullPointerException { // violation, max allowed is 4
        // body
    }

    public void myFunc() throws ArithmeticException,
                                NumberFormatException { // ok
        // body
    }

    private void privateFunc() throws CloneNotSupportedException,
                                ClassNotFoundException,
                                IllegalAccessException,
                                ArithmeticException,
                                ClassCastException { // violation, max allowed is 4
        // body
    }

    private void func() throws IllegalStateException,
                                NullPointerException { // ok
        // body
    }

}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="ThrowsCount_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+ThrowsCount">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="ThrowsCount_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22throws.count%22">
            throws.count</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="ThrowsCount_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="ThrowsCount_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>

    <section name="VisibilityModifier">
      <p>Since Checkstyle 3.0</p>
      <subsection name="Description" id="VisibilityModifier_Description">
        <p>
          Checks visibility of class members. Only static final, immutable or annotated
          by specified annotation members may be public; other class members must be private
          unless the property <code>protectedAllowed</code> or <code>packageAllowed</code> is set.
        </p>

        <p>
          Public members are not flagged if the name matches the public
          member regular expression (contains <code>"^serialVersionUID$"</code> by default).
        </p>
        <p>Note that
          Checkstyle 2 used to include <code>"^f[A-Z][a-zA-Z0-9]*$"</code> in the default
          pattern to allow names used in container-managed persistence for Enterprise JavaBeans
          (EJB) 1.1 with the default settings. With EJB 2.0 it is no longer necessary to have
          public access for persistent fields, so the default has been changed.
        </p>

        <p>
          Rationale: Enforce encapsulation.
        </p>
        <p>
          Check also has options making it less strict:
        </p>
        <p>
          <b>ignoreAnnotationCanonicalNames</b> - the list of annotations which ignore variables
          in consideration. If user will provide short annotation name that type will match to any
          named the same type without consideration of package.
        </p>
        <p>
          <b>allowPublicFinalFields</b> - which allows public final fields.
        </p>
        <p>
          <b>allowPublicImmutableFields</b> - which allows immutable fields to be declared as
          public if defined in final class.
        </p>
        <p>
          Field is known to be immutable if:
        </p>
        <ul>
          <li>It's declared as final</li>
          <li>
            Has either a primitive type or instance of class user defined to be immutable
            (such as String, ImmutableCollection from Guava and etc)
          </li>
        </ul>
        <p>
          Classes known to be immutable are listed in <b>immutableClassCanonicalNames</b> by their
          canonical names.
        </p>
        <p>
          Property Rationale: Forcing all fields of class to have private modifier by default is
          good in most cases, but in some cases it drawbacks in too much boilerplate get/set code.
          One of such cases are immutable classes.
        </p>
        <p>
          Restriction: Check doesn't check if class is immutable, there's no
          checking if accessory methods are missing and all fields are immutable, we only check
          if current field is immutable or final. Under the flag
          <b>allowPublicImmutableFields</b>, the enclosing class must also be final, to encourage
          immutability. Under the flag <b>allowPublicFinalFields</b>, the final modifier on
          the enclosing class is optional.
        </p>
        <p>
          Star imports are out of scope of this Check. So if one of type imported via
          star import collides with user specified one by its short name -
          there won't be Check's violation.
        </p>
      </subsection>

      <subsection name="Properties" id="VisibilityModifier_Properties">
        <div class="wrapper">
          <table>
            <tr>
              <th>name</th>
              <th>description</th>
              <th>type</th>
              <th>default value</th>
              <th>since</th>
            </tr>
            <tr>
              <td>packageAllowed</td>
              <td>Control whether package visible members are allowed.</td>
              <td><a href="property_types.html#boolean">boolean</a></td>
              <td><code>false</code></td>
              <td>3.0</td>
            </tr>
            <tr>
              <td>protectedAllowed</td>
              <td>Control whether protected members are allowed.</td>
              <td><a href="property_types.html#boolean">boolean</a></td>
              <td><code>false</code></td>
              <td>3.0</td>
            </tr>
            <tr>
              <td>publicMemberPattern</td>
              <td>Specify pattern for public members that should be ignored.</td>
              <td><a href="property_types.html#Pattern">Pattern</a></td>
              <td><code>"^serialVersionUID$"</code></td>
              <td>3.0</td>
            </tr>
            <tr>
              <td>allowPublicFinalFields</td>
              <td>Allow final fields to be declared as public.</td>
              <td><a href="property_types.html#boolean">boolean</a></td>
              <td><code>false</code></td>
              <td>7.0</td>
            </tr>
            <tr>
              <td>allowPublicImmutableFields</td>
              <td>Allow immutable fields to be declared as public if defined in final class.</td>
              <td><a href="property_types.html#boolean">boolean</a></td>
              <td><code>false</code></td>
              <td>6.4</td>
            </tr>
            <tr>
              <td>immutableClassCanonicalNames</td>
              <td>Specify immutable classes canonical names.</td>
              <td><a href="property_types.html#String.5B.5D">String[]</a></td>
              <td><code>java.io.File, java.lang.Boolean, java.lang.Byte, java.lang.Character,
                java.lang.Double, java.lang.Float, java.lang.Integer, java.lang.Long,
                java.lang.Short, java.lang.StackTraceElement, java.lang.String,
                java.math.BigDecimal, java.math.BigInteger, java.net.Inet4Address,
                java.net.Inet6Address, java.net.InetSocketAddress, java.net.URI,
                java.net.URL, java.util.Locale, java.util.UUID</code></td>
              <td>6.4.1</td>
            </tr>
            <tr>
              <td>ignoreAnnotationCanonicalNames</td>
              <td>
                Specify the list of annotations canonical names which ignore variables in
                consideration.
              </td>
              <td><a href="property_types.html#String.5B.5D">String[]</a></td>
              <td><code>com.google.common.annotations.VisibleForTesting,
                org.junit.ClassRule, org.junit.Rule</code></td>
              <td>6.5</td>
            </tr>
          </table>
        </div>
      </subsection>

      <subsection name="Examples" id="VisibilityModifier_Examples">
        <p>
          To configure the check:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;/&gt;
        </source>

        <p>
          To configure the check so that it allows package visible members:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;packageAllowed&quot; value=&quot;true&quot;/&gt;
&lt;/module&gt;
        </source>

        <p>
          To configure the check so that it allows no public members:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;publicMemberPattern&quot; value=&quot;^$&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          To configure the Check so that it allows public immutable fields
          (mostly for immutable classes):
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;allowPublicImmutableFields&quot; value=&quot;true&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example of allowed public immutable fields:
        </p>
        <source>
public class ImmutableClass
{
  public final ImmutableSet&lt;String&gt; includes; // No warning
  public final ImmutableSet&lt;String&gt; excludes; // No warning
  public final java.lang.String notes; // No warning
  public final BigDecimal value; // No warning

  public ImmutableClass(Collection&lt;String&gt; includes, Collection&lt;String&gt; excludes,
               BigDecimal value, String notes)
  {
    this.includes = ImmutableSet.copyOf(includes);
    this.excludes = ImmutableSet.copyOf(excludes);
    this.value = value;
    this.notes = notes;
  }
}
        </source>
        <p>
          To configure the Check in order to allow user specified immutable class names:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;allowPublicImmutableFields&quot; value=&quot;true&quot;/&gt;
  &lt;property name=&quot;immutableClassCanonicalNames&quot; value=&quot;
  com.google.common.collect.ImmutableSet&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example of allowed public immutable fields:
        </p>
        <source>
public class ImmutableClass
{
  public final ImmutableSet&lt;String&gt; includes; // No warning
  public final ImmutableSet&lt;String&gt; excludes; // No warning
  public final java.lang.String notes; // Warning here because
                                       //'java.lang.String' wasn't specified as allowed class
  public final int someValue; // No warning

  public ImmutableClass(Collection&lt;String&gt; includes, Collection&lt;String&gt; excludes,
               String notes, int someValue)
  {
    this.includes = ImmutableSet.copyOf(includes);
    this.excludes = ImmutableSet.copyOf(excludes);
    this.value = value;
    this.notes = notes;
    this.someValue = someValue;
  }
}
        </source>

        <p>
          Note, if allowPublicImmutableFields is set to true, the check will also check whether
          generic type parameters are immutable. If at least one generic type parameter is mutable,
          there will be a violation.
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;allowPublicImmutableFields&quot; value=&quot;true&quot;/&gt;
  &lt;property name=&quot;immutableClassCanonicalNames&quot;
    value=&quot;com.google.common.collect.ImmutableSet, com.google.common.collect.ImmutableMap,
      java.lang.String&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example of how the check works:
        </p>
        <source>
public final class Test {
  public final String s;
  public final ImmutableSet&lt;String&gt; names;
  public final ImmutableSet&lt;Object&gt; objects; // violation (Object class is mutable)
  public final ImmutableMap&lt;String, Object&gt; links; // violation (Object class is mutable)

  public Test() {
    s = "Hello!";
    names = ImmutableSet.of();
    objects = ImmutableSet.of();
    links = ImmutableMap.of();
  }
}
        </source>
        <p>
          To configure the Check passing fields annotated with @com.annotation.CustomAnnotation:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;ignoreAnnotationCanonicalNames&quot; value=
  &quot;com.annotation.CustomAnnotation&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example of allowed field:
        </p>
        <source>
class SomeClass
{
  @com.annotation.CustomAnnotation
  String annotatedString; // no warning
  @CustomAnnotation
  String shortCustomAnnotated; // no warning
}
        </source>

        <p>
          To configure the Check passing fields annotated with @org.junit.Rule,
          @org.junit.ClassRule and @com.google.common.annotations.VisibleForTesting annotations:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;/&gt;
        </source>
        <p>
          Example of allowed fields:
        </p>
        <source>
class SomeClass
{
  @org.junit.Rule
  public TemporaryFolder publicJUnitRule = new TemporaryFolder(); // no warning
  @org.junit.ClassRule
  public static TemporaryFolder publicJUnitClassRule = new TemporaryFolder(); // no warning
  @com.google.common.annotations.VisibleForTesting
  public String testString = ""; // no warning
}
        </source>

        <p>
          To configure the Check passing fields annotated with short annotation name:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;ignoreAnnotationCanonicalNames&quot;
  value=&quot;CustomAnnotation&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Example of allowed fields:
        </p>
        <source>
class SomeClass
{
  @CustomAnnotation
  String customAnnotated; // no warning
  @com.annotation.CustomAnnotation
  String customAnnotated1; // no warning
  @mypackage.annotation.CustomAnnotation
  String customAnnotatedAnotherPackage; // another package but short name matches
                                        // so no violation
}
        </source>

        <p>
          To understand the difference between allowPublicImmutableFields and
          allowPublicFinalFields options, please, study the following examples.
        </p>
        <p>
           1) To configure the check to use only 'allowPublicImmutableFields' option:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;allowPublicImmutableFields&quot; value=&quot;true&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Code example:
        </p>
        <source>
public class InputPublicImmutable {
  public final int someIntValue; // violation
  public final ImmutableSet&lt;String&gt; includes; // violation
  public final java.lang.String notes; // violation
  public final BigDecimal value; // violation
  public final List list; // violation

  public InputPublicImmutable(Collection&lt;String&gt; includes,
        BigDecimal value, String notes, int someValue, List l) {
    this.includes = ImmutableSet.copyOf(includes);
    this.value = value;
    this.notes = notes;
    this.someIntValue = someValue;
    this.list = l;
  }
}
        </source>
        <p>
          2) To configure the check to use only 'allowPublicFinalFields' option:
        </p>
        <source>
&lt;module name=&quot;VisibilityModifier&quot;&gt;
  &lt;property name=&quot;allowPublicFinalFields&quot; value=&quot;true&quot;/&gt;
&lt;/module&gt;
        </source>
        <p>
          Code example:
        </p>
        <source>
public class InputPublicImmutable {
  public final int someIntValue;
  public final ImmutableSet&lt;String&gt; includes;
  public final java.lang.String notes;
  public final BigDecimal value;
  public final List list;

  public InputPublicImmutable(Collection&lt;String&gt; includes,
        BigDecimal value, String notes, int someValue, List l) {
    this.includes = ImmutableSet.copyOf(includes);
    this.value = value;
    this.notes = notes;
    this.someIntValue = someValue;
    this.list = l;
  }
}
        </source>
      </subsection>

      <subsection name="Example of Usage" id="VisibilityModifier_Example_of_Usage">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources+filename%3Asun_checks.xml+repo%3Acheckstyle%2Fcheckstyle+VisibilityModifier">
            Sun Style</a>
          </li>
          <li>
            <a href="https://github.com/search?q=path%3Aconfig+filename%3Acheckstyle_checks.xml+repo%3Acheckstyle%2Fcheckstyle+VisibilityModifier">
            Checkstyle Style</a>
          </li>
        </ul>
      </subsection>

      <subsection name="Violation Messages" id="VisibilityModifier_Violation_Messages">
        <ul>
          <li>
            <a href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign+filename%3Amessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22variable.notPrivate%22">
            variable.notPrivate</a>
          </li>
        </ul>
        <p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="config.html#Custom_messages">see the documentation</a> to learn how to.
        </p>
      </subsection>

      <subsection name="Package" id="VisibilityModifier_Package">
        <p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </subsection>

      <subsection name="Parent Module" id="VisibilityModifier_Parent_Module">
        <p>
          <a href="config.html#TreeWalker">TreeWalker</a>
        </p>
      </subsection>
    </section>
  </body>
</document>
